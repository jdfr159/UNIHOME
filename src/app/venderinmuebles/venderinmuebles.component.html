<!-- venderinmuebles.component.html -->
<body>
  <div class="form-container">
    <form [formGroup]="saleForm" (ngSubmit)="submitForm()" class="form-wrapper">
      
      <!-- Navegación entre secciones -->
      <div class="form-navigation">
        <button type="button" (click)="setActiveSection('main')" [class.active]="activeSection === 'main'">Datos Principales</button>
        <button type="button" (click)="setActiveSection('details')" [class.active]="activeSection === 'details'">Detalles Adicionales</button>
      </div>

      <!-- Sección de Datos Principales -->
      <div *ngIf="activeSection === 'main'" class="form-section">
        <label for="transactionType">Tipo de Transacción *</label>
        <select id="transactionType" formControlName="transactionType" [ngClass]="{'input-valid': saleForm.get('transactionType')?.valid, 'input-invalid': saleForm.get('transactionType')?.invalid && saleForm.get('transactionType')?.touched}">
          <option value="">Seleccione una opción</option>
          <option value="venta">Venta</option>
          <option value="arriendo">Arriendo</option>
          <option value="ambos">Ambos</option>
        </select>
        <div *ngIf="saleForm.get('transactionType')?.hasError('required') && saleForm.get('transactionType')?.touched" class="error">Este campo es obligatorio.</div>

        <label for="address">Dirección *</label>
        <input id="address" type="text" formControlName="address" placeholder="Dirección completa" />

        <label for="title">Barrio *</label>
        <input id="title" type="text" formControlName="title" placeholder="Ej. Casa en el centro" />

        <label for="price">Precio (COP) *</label>
        <input id="price" type="number" formControlName="price" placeholder="Ej. 100000" />

        <label for="images">Imágenes del Inmueble</label>
        <input id="images" type="file" (change)="onFileSelected($event)" multiple accept="image/*" />
        <div *ngIf="uploadedImages.length > 0" class="image-preview">
          <div *ngFor="let image of uploadedImages; let i = index">
            <img [src]="image.previewUrl" alt="Vista previa de imagen {{i + 1}}">
            <button type="button" (click)="removeImage(i)">Eliminar</button>
          </div>
        </div>
      </div>

      <!-- Sección de Detalles Adicionales -->
      <div *ngIf="activeSection === 'details'" class="form-section">
        <label for="bedrooms">Habitaciones</label>
        <input id="bedrooms" type="number" formControlName="bedrooms" placeholder="Ej. 3" />

        <label for="bathrooms">Baños</label>
        <input id="bathrooms" type="number" formControlName="bathrooms" placeholder="Ej. 2" />

        <label for="area">Área (m²)</label>
        <input id="area" type="number" formControlName="area" placeholder="Ej. 120" />

        <label for="description">Descripción</label>
        <textarea id="description" formControlName="description" rows="3" placeholder="Descripción del inmueble"></textarea>

      </div>

      <!-- Botón de envío -->
      <button type="submit"  [disabled]="!saleForm.valid || loading">{{ loading ? 'Cargando...' : 'Registrar Venta' }}</button>
    </form>
  </div>
</body>
